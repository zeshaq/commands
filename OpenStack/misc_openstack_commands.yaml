ssh ubuntu@172.16.0.2 -i ~/.local/share/juju/ssh/juju_id_rsa
juju --watch 10s


juju run --unit keystone/leader leader-get admin_passwd
juju run-action --wait grafana/leader show-admin-password

juju run-action grafana/leader get-admin-password --model cos --wait

se9deungahHei4Se
beehungahVo3veim
117bd8160cdd1b95a91709c923baa6ac

juju config nova-cloud-controller console-access-protocol=novnc


juju run-action --wait grafana/0 get-admin-password
 juju show-status-log elasticsearch/0
watch --color juju status --color --relations


juju deploy --channel 8.0/stable mysql-router ironic-api-mysql-router
juju add-relation ironic-api-mysql-router:db-router mysql-innodb-cluster:db-router
juju add-relation ironic-api-mysql-router:shared-db ironic-api:shared-db

juju add-relation keystone:identity-service ironic-api:identity-service
juju add-relation ironic-api:certificates vault:certificates


juju run-action \
    --wait vault/0 get-root-ca --format json \
    | jq -r '."unit-vault-0".results.output' \
    | base64 -w 0 \
    | xargs -I {} juju config openstack-service-checks trusted_ssl_ca={}







juju add-cloud --client -f configs.yaml maas-one
juju add-credential --client -f configs.yaml maas-one
juju add-model --config default-series=jammy openstack


sudo snap install maas-test-db
sudo snap install maas --channel=3.3/stable
sudo maas init region+rack --maas-url http://150.16.0.3:5240/MAAS --database-uri maas-test-db:///
sudo maas createadmin --username admin --password admin --email admin@example.com --ssh-import gh:zeshaq
sudo maas apikey --username admin > ~ubuntu/admin-api-key



juju run-action ceilometer/0 ceilometer-upgrade --wait
juju add-relation vault:certificates gnocchi:certificates
juju add-relation vault:certificates aodh:certificates



 sudo snap install juju --channel 3.2/stable
mkdir -p ~/.local/share


juju debug-log --tail --replay


// when deploying kubernetes 
sysctl -w net.ipv4.conf.default.rp_filter=0 ;
sysctl -w "net.ipv4.conf.all.rp_filter=1"
cat /proc/sys/net/ipv4/conf/all/rp_filter


juju run-action ceph-osd/0 list-disks --wait

juju run-action --wait ceph-osd/0 zap-disk i-really-mean-it=true devices=/dev/sdb
juju run-action ceph-osd/0 add-disk osd-devices=/dev/sdb --wait


#openstack final commands
sudo snap install openstackclients
git clone https://github.com/openstack-charmers/openstack-bundles ~/openstack-bundles
source ~/openstack-bundles/stable/openstack-base/openrc
env | grep OS_
openstack endpoint list --interface admin
mkdir ~/cloud-images


ashuk6bie3Jirida

wget http://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-amd64.img \
   -O ~/cloud-images/jammy-amd64.img

openstack image create --public --container-format bare \
   --disk-format qcow2 --file ~/cloud-images/jammy-amd64.img \
   jammy-amd64

openstack flavor create --ram 2048 --disk 20 --ephemeral 20 m1.small

openstack network create --external --share \
   --provider-network-type flat --provider-physical-network physnet1 \
   ext_net



   openstack subnet create --network ext_net --no-dhcp \
   --gateway 158.0.0.1 --subnet-range 158.0.0.0/22 \
   --allocation-pool start=158.0.0.220,end=158.0.0.250 \
   ext_subnet

   openstack subnet create --network ext_net --no-dhcp \
   --gateway 159.0.0.1 --subnet-range 159.0.0.0/22 \
   --allocation-pool start=159.0.0.220,end=159.0.0.250 \
   ext_subnet2

   openstack network create --internal int_net

openstack subnet create \
   --allocation-pool start=192.168.0.10,end=192.168.0.99 \
   --subnet-range 192.168.0.0/24 --dns-nameserver 8.8.8.8 --network int_net \
   int_subnet


   openstack router create router1
openstack router add subnet router1 int_subnet

openstack router set router1 --external-gateway ext_net


   openstack network create --internal int_net2

openstack subnet create \
   --allocation-pool start=192.155.0.10,end=192.155.0.99 \
   --subnet-range 192.155.0.0/24 --dns-nameserver 8.8.8.8 --network int_net2 \
   int_subnet2

   openstack router create router2
openstack router add subnet router2 int_subnet2
openstack router set router2 --external-gateway ext_net




// second network


 